// We implement MWC animation specs by using a shared-axis elevation (z-axis)
// transformation when navigating to and from nested pages.
// @see {@link https://material.io/design/motion/the-motion-system.html#shared-axis}
// @see {@link https://material.io/develop/web/components/animation}
@use '@material/animation/_index.scss' as animation;

// Animation for incoming page (i.e. the nested page) when navigating downward
// from parent page to a nested page.
@keyframes incoming-fade-in {
  from {
    opacity: 0;
    transform: scale(0.8);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

// Animation for outgoing page (i.e. the parent page) when navigating downward
// from parent page to a nested page.
@keyframes outgoing-fade-in {
  from {
    opacity: 1;
    transform: scale(1);
  }

  to {
    opacity: 0;
    transform: scale(1.1);
  }
}

// Animation for incoming page (i.e. the parent page) when navigating from a
// nested page to it's parent page. This is the exact inverse of the
// `outgoing-fade-in` keyframes.
@keyframes incoming-fade-out {
  from {
    opacity: 0;
    transform: scale(1.1);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

// Animation for outgoing page (i.e. the nested page) when navigating from a
// nested page to it's parent page. This is the exact inverse of the
// `incoming-fade-in` keyframes.
@keyframes outgoing-fade-out {
  from {
    opacity: 1;
    transform: scale(1);
  }

  to {
    opacity: 0;
    transform: scale(0.8);
  }
}

.dialog :global(.mdc-dialog__surface) {
  width: calc(100vw - 32px);
  max-width: 750px;
  position: relative;
  display: grid;

  .page {
    // We use grid display to be able to position each page on top of one
    // another yet still retain their sizing to size the dialog surface.
    // @see {@link https://stackoverflow.com/a/51949049/10023158}
    grid-column: 1;
    grid-row: 1;
    z-index: 4;
    max-height: calc(100vh - 32px);

    @mixin hidden {
      overflow: hidden;
      z-index: 1;
      opacity: 0;
    }

    &--incoming-fade-in {
      animation: animation.standard(incoming-fade-in, 2400ms);
    }

    &--outgoing-fade-in {
      @include hidden;
      animation: animation.standard(outgoing-fade-in, 2400ms);
    }

    &--incoming-fade-out {
      animation: animation.standard(incoming-fade-out, 2400ms);
    }

    &--outgoing-fade-out {
      @include hidden;
      animation: animation.standard(outgoing-fade-out, 2400ms);
    }

    &--hidden {
      @include hidden;
    }
  }
}

.animating :global(.mdc-dialog__surface) {
  overflow: hidden;
}
